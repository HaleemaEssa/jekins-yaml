pipeline:
   agent: 
    any:
   environment: 
    DOCKERHUB_CREDENTIALS: credentials('haleema-dockerhub')
   stages:
     - stage: "Stage1"
       steps:
         - sh 'echo $DOCKERHUB_CREDENTIALS_PSW | docker login -u $DOCKERHUB_CREDENTIALS_USR --password-stdin'
         - sh "java -version"
         - sh "git --version"
         - sh "docker --version"
     - stage: "RPi-node"
         options:
           - "timeout(time: 40, unit: "SECONDS")"
         agent:
           node:
             label: 'linuxslave1'
       steps:
         scripts:
            try:
              sh 'echo "rpi" '
              git branch: 'main', url: 'https://github.com/HaleemaEssa/first_jenkins_project.git'
              sleep(time: 3, unit: "SECONDS")
              sh 'docker run --privileged -t haleema/docker-rpi'
              sleep(time: 4, unit: "SECONDS")
            catch (Throwable e):
              echo "Caught ${e.toString()}"
              currentBuild.result = "SUCCESS"
              
